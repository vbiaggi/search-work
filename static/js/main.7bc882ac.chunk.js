(this["webpackJsonpsearch-work"]=this["webpackJsonpsearch-work"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),l=(n(13),n(14),n(15),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h2",{className:"sky-blue"},"Find yourself in GraphQL"))}),s=n(4),i=n(1),u=n.n(i),m=n(2),f=n(3),p=n(7),d=function(e){var t=e.handleChange,n=e.value;return r.a.createElement("div",{className:"search-bar-container"},r.a.createElement("input",{className:"search-bar",type:"text",name:"",id:"",placeholder:"Find your job, find yourself...",onChange:t,value:n}),r.a.createElement("i",{className:"fas fa-search search-icon"}))},h=function(e){var t=e.data;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-5 list-container"},r.a.createElement("header",null,r.a.createElement("p",{className:"list-date"},function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()+":"+(1===(t.getMinutes()+"").length?"0":"")+t.getMinutes())}(e.postedAt)),r.a.createElement("p",{className:"list-title"},e.title)),r.a.createElement("section",null,0!==e.countries.length&&r.a.createElement("p",null,r.a.createElement("span",null,"Country:  "),e.countries[0].name),r.a.createElement("p",null,r.a.createElement("span",null,"Company:  "),e.company.name),r.a.createElement("div",{className:"list-btn-container"},r.a.createElement("a",{href:"mailto:".concat(e.userEmail),target:"_blank"},"Send request"))))})))},v=function(e){var t="";return"countries"===e?t="\n      {\n        countries {\n          id\n          name\n        }\n      }\n    ":"jobs"===e?t="\n      {\n        jobs {\n          id\n          title\n          countries {\n            id\n            name\n          }\n          company {\n            id\n            name\n          }\n          postedAt\n          createdAt\n          userEmail\n        }\n      }\n    ":"companies"===e&&(t="\n      {\n        companies {\n          id\n          name\n        }\n      }\n    "),t},E=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.graphql.jobs/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:v(t)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t,n,a,r,c,o=e.jobs,l=e.sort,s=e.search,i=e.filterByCountry,u=e.filterByCompany;return function(e,t,n){return e.sort((function(e,a){var r=new Date(e[n]).getTime(),c=new Date(a[n]).getTime(),o="desc"===t?-1:1;return r>c?1*o:r<c?-1*o:0}))}(function(e,t,n){return t?e.filter((function(e){return e[n].toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1})):e}(function(e,t,n,a){return t?e.filter((function(e){return e[n][a].toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1})):e}((t=o,a="countries",r=0,c="id",(n=i)?t.filter((function(e){return 0!==e[a].length&&e[a][r][c].toLocaleLowerCase().indexOf(n.toLocaleLowerCase())>-1})):t),u,"company","id"),s,"title"),l,"postedAt")},y=function(e){var t=e.handleChange,n=e.arr,a=e.title;return r.a.createElement("div",{className:"filter-container"},r.a.createElement("label",{htmlFor:""},a),r.a.createElement("select",{name:"",id:"",onChange:t},r.a.createElement("option",{value:""},"Todos"),0!==n.length&&n.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))))},j={jobs:[],sort:"desc",filterByCountry:"",filterByCompany:"",search:""},g=function(e){Object(p.a)(e);var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)([]),i=Object(f.a)(l,2),v=i[0],g=i[1],w=Object(a.useState)([]),O=Object(f.a)(w,2),C=O[0],N=O[1],k=Object(a.useState)([]),x=Object(f.a)(k,2),L=x[0],S=x[1],B=Object(a.useState)(j),A=Object(f.a)(B,2),F=A[0],T=A[1],D=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("countries");case 2:t=e.sent,g(t.data.countries);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("companies");case 2:t=e.sent,N(t.data.companies);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("jobs");case 2:t=e.sent,T(Object(s.a)({},F,{jobs:t.data.jobs})),S(t.data.jobs);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){T(e);var t=b(e);S(t)};return Object(a.useEffect)((function(){D(),M(),q()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"options-container"},r.a.createElement("div",{className:"col-s-12 col-7 option option-search-bar"},r.a.createElement(d,{value:c,handleChange:function(e){var t=e.target.value;o(t);var n=Object(s.a)({},F,{search:t});J(n)}})),r.a.createElement("div",{className:"col-s-7 col-3 option filters-container"},r.a.createElement("p",{className:"option-title"},"Filter by: "),r.a.createElement("div",{className:"filters"},r.a.createElement(y,{title:"Country",arr:v,handleChange:function(e){var t=e.target.value,n=Object(s.a)({},F,{filterByCountry:t});J(n)}}),r.a.createElement(y,{title:"Company",arr:C,handleChange:function(e){var t=e.target.value,n=Object(s.a)({},F,{filterByCompany:t});J(n)}}))),r.a.createElement("div",{className:"col-s-3 col-1 option"},r.a.createElement("p",{className:"option-title"},"Sort by:"),r.a.createElement("div",{className:"sort-container"},r.a.createElement("label",{htmlFor:""},"Posted date"),r.a.createElement("a",{href:"#",onClick:function(){var e=Object(s.a)({},F,{sort:"desc"===F.sort?"asc":"desc"});J(e)}},r.a.createElement("i",{className:"fas  fa-".concat("desc"!==F.sort?"sort-down":"sort-up"," sort-icon")}))))),0!==L.length?r.a.createElement(h,{data:L}):r.a.createElement("div",null,r.a.createElement("p",null,"So sorry!"),r.a.createElement("p",null,"No jobs found.")))},w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l,null),r.a.createElement(g,null))},O=function(){return r.a.createElement(w,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.7bc882ac.chunk.js.map